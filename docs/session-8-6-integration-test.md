# 프로필 페이지 통합 및 테스트

## 개요

프로필 페이지의 모든 기능이 PRD와 db.sql 스키마에 맞게 정상 작동하는지 검증하는 문서입니다.

## 테스트 환경

- **프로젝트**: Mini Instagram SNS
- **테스트 일자**: 2024-12-08
- **테스트 범위**: 프로필 페이지 통합 테스트

---

## 1. 통합 테스트 시나리오

### 1.1 본인 프로필 접근 테스트

**경로**: `/profile` → `/profile/[dbUserId]` 리다이렉트

#### 검증 항목

- [ ] 로그인 상태에서 `/profile` 접근 시 본인 프로필로 리다이렉트
  - **예상 결과**: `/profile` 접근 시 자동으로 `/profile/[본인DBUUID]`로 리다이렉트
  - **실제 결과**: 
  - **비고**: 

- [ ] 프로필 헤더에 "프로필 편집" 버튼 표시 (비활성화 상태)
  - **예상 결과**: 본인 프로필에서 "프로필 편집" 버튼이 표시되고 비활성화됨
  - **실제 결과**: 
  - **비고**: 

- [ ] 팔로우 버튼 미표시
  - **예상 결과**: 본인 프로필에서는 팔로우 버튼이 표시되지 않음
  - **실제 결과**: 
  - **비고**: 

- [ ] 통계 정확도 (게시물 수, 팔로워 수, 팔로잉 수)
  - **예상 결과**: user_stats 뷰에서 조회한 통계가 정확히 표시됨
  - **실제 결과**: 
  - **비고**: 

---

### 1.2 다른 사람 프로필 접근 테스트

**경로**: `/profile/[userId]` 직접 접근

#### 검증 항목

- [ ] 다른 사용자 프로필 정보 정확히 표시
  - **예상 결과**: 다른 사용자의 이름, 프로필 이미지, 통계가 정확히 표시됨
  - **실제 결과**: 
  - **비고**: 

- [ ] "팔로우" 또는 "팔로잉" 버튼 표시
  - **예상 결과**: 다른 사용자 프로필에서 팔로우 상태에 따라 버튼이 표시됨
  - **실제 결과**: 
  - **비고**: 

- [ ] 팔로우 상태에 따른 버튼 스타일 변경
  - **예상 결과**: 
    - 미팔로우: "팔로우" 버튼 (파란색, btn-instagram)
    - 팔로우 중: "팔로잉" 버튼 (회색, hover 시 빨간 테두리)
  - **실제 결과**: 
  - **비고**: 

- [ ] 통계 정확도
  - **예상 결과**: 다른 사용자의 게시물 수, 팔로워 수, 팔로잉 수가 정확히 표시됨
  - **실제 결과**: 
  - **비고**: 

---

### 1.3 게시물이 없는 프로필 테스트

#### 검증 항목

- [ ] PostGrid에 빈 상태 메시지 표시 ("아직 게시물이 없습니다.")
  - **예상 결과**: 게시물이 없는 경우 빈 상태 메시지가 표시됨
  - **실제 결과**: 
  - **비고**: 

- [ ] 프로필 헤더의 게시물 수가 0으로 표시
  - **예상 결과**: 게시물 수가 0으로 표시됨
  - **실제 결과**: 
  - **비고**: 

- [ ] 레이아웃 깨짐 없음
  - **예상 결과**: 빈 상태에서도 레이아웃이 깨지지 않음
  - **실제 결과**: 
  - **비고**: 

---

### 1.4 게시물이 많은 프로필 테스트

#### 검증 항목

- [ ] 3열 그리드 레이아웃 정확도
  - **예상 결과**: 게시물이 많아도 3열 그리드가 유지됨
  - **실제 결과**: 
  - **비고**: 

- [ ] 많은 게시물(20개 이상) 로드 시 성능
  - **예상 결과**: 많은 게시물을 로드해도 성능 저하 없음
  - **실제 결과**: 
  - **비고**: 

- [ ] 이미지 로딩 최적화 (Next.js Image 컴포넌트)
  - **예상 결과**: Next.js Image 컴포넌트가 사용되어 이미지 최적화됨
  - **실제 결과**: 
  - **비고**: 

- [ ] Hover 오버레이 정상 작동
  - **예상 결과**: 게시물에 마우스 오버 시 좋아요/댓글 수가 표시됨
  - **실제 결과**: 
  - **비고**: 

---

### 1.5 게시물 클릭 → 모달 열기 테스트

#### 검증 항목

- [ ] PostGrid에서 게시물 클릭 시 PostModal 열림
  - **예상 결과**: 게시물 썸네일 클릭 시 PostModal이 열림
  - **실제 결과**: 
  - **비고**: 

- [ ] 모달에 게시물 상세 정보 정확히 표시
  - **예상 결과**: 게시물 이미지, 캡션, 좋아요 수, 댓글 목록이 정확히 표시됨
  - **실제 결과**: 
  - **비고**: 

- [ ] Desktop: 이미지 50% + 댓글 50% 레이아웃
  - **예상 결과**: Desktop에서 모달이 좌우 분할 레이아웃으로 표시됨
  - **실제 결과**: 
  - **비고**: 

- [ ] Mobile: 전체 화면 모달 또는 페이지 전환
  - **예상 결과**: Mobile에서 모달이 전체 화면으로 표시됨
  - **실제 결과**: 
  - **비고**: 

- [ ] 이전/다음 게시물 네비게이션 (Desktop)
  - **예상 결과**: Desktop에서 이전/다음 버튼으로 게시물 이동 가능
  - **실제 결과**: 
  - **비고**: 

- [ ] 좋아요, 댓글 기능 정상 작동
  - **예상 결과**: 모달 내에서 좋아요 및 댓글 작성/삭제가 정상 작동함
  - **실제 결과**: 
  - **비고**: 

---

### 1.6 반응형 테스트

#### 검증 항목

- [ ] Mobile (< 768px): 프로필 헤더 세로 레이아웃, 프로필 이미지 90px
  - **예상 결과**: Mobile에서 프로필 헤더가 세로로 배치되고 이미지가 90px
  - **실제 결과**: 
  - **비고**: 

- [ ] Tablet (768px ~ 1023px): 프로필 헤더 가로 레이아웃, 프로필 이미지 120px
  - **예상 결과**: Tablet에서 프로필 헤더가 가로로 배치되고 이미지가 120px
  - **실제 결과**: 
  - **비고**: 

- [ ] Desktop (1024px+): 프로필 헤더 가로 레이아웃, 프로필 이미지 150px
  - **예상 결과**: Desktop에서 프로필 헤더가 가로로 배치되고 이미지가 150px
  - **실제 결과**: 
  - **비고**: 

- [ ] 3열 그리드가 모든 화면 크기에서 유지
  - **예상 결과**: 모든 화면 크기에서 3열 그리드가 유지됨
  - **실제 결과**: 
  - **비고**: 

- [ ] PostModal 반응형 레이아웃
  - **예상 결과**: PostModal이 화면 크기에 따라 적절히 반응함
  - **실제 결과**: 
  - **비고**: 

---

## 2. 에러 처리 검증

### 2.1 존재하지 않는 사용자 접근

**경로**: `/profile/[존재하지않는UUID]`

#### 검증 항목

- [ ] 404 페이지 표시 (`notFound()` 호출 확인)
  - **예상 결과**: 존재하지 않는 UUID로 접근 시 404 페이지가 표시됨
  - **실제 결과**: 
  - **비고**: 

- [ ] 에러 메시지 사용자 친화적
  - **예상 결과**: 사용자가 이해하기 쉬운 에러 메시지가 표시됨
  - **실제 결과**: 
  - **비고**: 

---

### 2.2 로그인하지 않은 상태에서 프로필 접근

#### 검증 항목

- [ ] `/profile` 접근 시 `/sign-in`으로 리다이렉트
  - **예상 결과**: 로그인하지 않은 상태에서 `/profile` 접근 시 로그인 페이지로 리다이렉트
  - **실제 결과**: 
  - **비고**: 

- [ ] `/profile/[userId]` 접근 시 프로필은 표시되지만 팔로우 기능 비활성화
  - **예상 결과**: 로그인하지 않은 상태에서도 다른 사용자 프로필은 볼 수 있지만 팔로우 버튼이 비활성화됨
  - **실제 결과**: 
  - **비고**: 

---

## 3. 팔로우 기능 연동 준비

> **주의**: 팔로우 기능은 TODO.md ##9 완료 후 활성화 예정

### 3.1 ProfileHeader 팔로우 기능 활성화

**파일**: `components/profile/profile-header.tsx`

#### 검증 항목

- [ ] TODO 주석 제거 (62-76줄)
  - **예상 결과**: TODO 주석이 제거되고 실제 API 호출 코드가 활성화됨
  - **실제 결과**: 
  - **비고**: TODO.md ##9 완료 후 진행

- [ ] `/api/follows` API 호출 코드 활성화
  - **예상 결과**: 팔로우/언팔로우 시 `/api/follows` API가 호출됨
  - **실제 결과**: 
  - **비고**: TODO.md ##9 완료 후 진행

- [ ] 에러 처리 및 롤백 로직 확인
  - **예상 결과**: API 호출 실패 시 Optimistic UI가 롤백됨
  - **실제 결과**: 
  - **비고**: TODO.md ##9 완료 후 진행

- [ ] Optimistic UI 업데이트 검증
  - **예상 결과**: 버튼 클릭 시 즉시 UI가 업데이트되고, API 호출 후 상태가 유지됨
  - **실제 결과**: 
  - **비고**: TODO.md ##9 완료 후 진행

---

### 3.2 팔로우/언팔로우 버튼 동작 확인

#### 검증 항목

- [ ] "팔로우" 버튼 클릭 시 즉시 UI 업데이트 (Optimistic UI)
  - **예상 결과**: 버튼 클릭 시 즉시 "팔로잉" 버튼으로 변경됨
  - **실제 결과**: 
  - **비고**: TODO.md ##9 완료 후 진행

- [ ] API 호출 성공 시 상태 유지
  - **예상 결과**: API 호출이 성공하면 변경된 상태가 유지됨
  - **실제 결과**: 
  - **비고**: TODO.md ##9 완료 후 진행

- [ ] API 호출 실패 시 롤백
  - **예상 결과**: API 호출이 실패하면 이전 상태로 롤백됨
  - **실제 결과**: 
  - **비고**: TODO.md ##9 완료 후 진행

- [ ] "팔로잉" 버튼 Hover 시 "언팔로우" 스타일 (빨간 테두리)
  - **예상 결과**: "팔로잉" 버튼에 마우스 오버 시 빨간 테두리가 표시됨
  - **실제 결과**: 
  - **비고**: TODO.md ##9 완료 후 진행

- [ ] 로딩 상태 표시 ("처리 중...")
  - **예상 결과**: API 호출 중 "처리 중..." 텍스트가 표시됨
  - **실제 결과**: 
  - **비고**: TODO.md ##9 완료 후 진행

---

### 3.3 통계 실시간 업데이트 확인

#### 검증 항목

- [ ] 팔로우 시 팔로워 수 +1
  - **예상 결과**: 팔로우 버튼 클릭 시 팔로워 수가 즉시 +1됨
  - **실제 결과**: 
  - **비고**: TODO.md ##9 완료 후 진행

- [ ] 언팔로우 시 팔로워 수 -1
  - **예상 결과**: 언팔로우 버튼 클릭 시 팔로워 수가 즉시 -1됨
  - **실제 결과**: 
  - **비고**: TODO.md ##9 완료 후 진행

- [ ] 통계 포맷팅 정확도 (formatNumber 함수)
  - **예상 결과**: 통계 숫자가 올바르게 포맷팅됨 (예: 1,234)
  - **실제 결과**: 
  - **비고**: TODO.md ##9 완료 후 진행

---

## 4. 발견된 이슈 및 해결 방법

### 이슈 1: [이슈 제목]

- **발견 일자**: 
- **증상**: 
- **원인**: 
- **해결 방법**: 
- **상태**: 

---

## 5. 테스트 결과 요약

### 통과 항목
- 

### 실패 항목
- 

### 보류 항목 (TODO.md ##9 완료 대기)
- 팔로우 기능 연동 관련 모든 항목

---

## 참고 파일

- `docs/PRD.md` - 프로필 페이지 요구사항
- `supabase/migrations/db.sql` - 데이터베이스 스키마
- `app/(main)/profile/[userId]/page.tsx` - 프로필 페이지
- `components/profile/profile-header.tsx` - 프로필 헤더
- `components/profile/post-grid.tsx` - 게시물 그리드
- `components/post/post-modal.tsx` - 게시물 상세 모달

